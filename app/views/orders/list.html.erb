<h1><%= t('list',param: 'Products') %></h1>
<%= render "products/search_form", path: orders_path %>
<% if @products.present? %>
  <div class="container d-flex flex-row flex-wrap justify-content-start ">
    <% @products.each do |product| %>
      <div class="d-flex flex-column m-3">
        <div class="card m-3 rounded-2 card-width">
          <%= image_view(product, ApplicationHelper::SHOW_IMAGE_SIZE) %>
          <hr class="m-0">
          <h5 class="card-title mx-3 mt-3"><%= product.name %></h5>
          <div class="card-body d-flex flex-column justify-content-between">
            <p><%= "#{t('serial_number')} : #{product.serial_no}" %></p>
            <p><%= "#{t('quantity')} : #{product.quantity}" %></p>
            <p><%= "#{t('sold')} : #{product.sold_quantity}" %></p>
            <div>
              <%= link_to t('show-button'), product, class: "btn btn-outline-primary" %>
            </div>
          </div>
        </div>
        <div>
          <% if check_order_array(product) %>
            <%= render 'orders/order_success_div' %>
          <% else %>
            <div id="order-div-<%= product.id %>">
              <div class="d-flex flex-row ml-5">
                <%= render 'orders/form', item: product, request: 'create' %>
              </div>
            </div>
            <div id="order-msg-<%= product.id %>" class="d-none">
              <%= render 'orders/order_success_div' %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
<br>
<%= render "shared/pagination", object: @products %>
<%= link_to t('list',param: 'Order'), orders_path(status: "order-list"), class: "btn btn-dark btn-lg" %>
